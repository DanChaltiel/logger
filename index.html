<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Modern and Flexible Logging Utility • logger</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A Modern and Flexible Logging Utility">
<meta property="og:description" content="Inspired by the the 'futile.logger' R package and 'logging' Python module, this utility provides a very flexible and extensible way of formatting and delivering log messages.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">logger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/daroczig/logger">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="logger" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#logger" class="anchor"></a>logger</h1></div>
<p>A modern and flexibly logging utility for R – heavily inspired by the <code>futile.logger</code> R package and <code>logging</code> Python module.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><code>logger</code> is not on CRAN yet, please install from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">'daroczig/logger'</span>)</a></code></pre></div>
</div>
<div id="quick-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-examples" class="anchor"></a>Quick examples</h2>
<p>TODO</p>
</div>
<div id="why-another-logging-r-package" class="section level2">
<h2 class="hasAnchor">
<a href="#why-another-logging-r-package" class="anchor"></a>Why another logging R package?</h2>
<p>Although there are multiple pretty good options already hosted on CRAN when it comes to logging in R, such as</p>
<ul>
<li>
<code>futile.logger</code>: probably the most popular <code>log4j</code> variant (and I’m a big fan)</li>
<li>
<code>logging</code>: just like Python’s <code>logging</code> package</li>
<li>
<code>loggit</code>: capture <code>message</code>, <code>warning</code> and <code>stop</code> function messages in a JSON file</li>
<li>
<code>log4r</code>: <code>log4j</code>-based, object-oriented logger</li>
<li>
<code>rsyslog</code>: logging to <code>syslog</code> on ‘POSIX’-compatible operating systems</li>
</ul>
<p>But some/most of these packages are</p>
<ul>
<li>not actively maintained any more, and/or maintainers are not being open for new features / patches</li>
<li>not being modular enough for extensions</li>
<li>prone to scoping issues</li>
<li>using strange syntax elements, eg dots in function names or object-oriented approaches not being very familiar to most R users</li>
<li>requires a lot of typing and code repetitions</li>
</ul>
<p>So based on all the above subjective opinions, I decided to write the <code>n+1</code>th extensible <code>log4j</code> logger that fits my liking – and hopefully yours as well – with the focus being on:</p>
<ul>
<li>keep it close to <code>log4j</code>
</li>
<li>respect the most recent function / variable naming conventions and general R coding style</li>
<li>by default, rely on <code>glue</code> when it comes to formatting / rendering log messages, but keep it flexible if others prefer <code>sprintf</code> (eg for performance reasons) or other functions</li>
<li>support vectorization (eg passing a vector to be logged on multiple lines)</li>
<li>make it easy to extend with new features (eg custom layouts, message formats and output)</li>
<li>prepare for writing to various services, streams etc</li>
<li>provide support for namespaces, preferably automatically finding and creating a custom namespace for all R packages writing log messages, each with optionally configurable log level threshold, message and output formats</li>
<li>allow stacking loggers to implement logger hierarchy – even within a namespace, so that the very same <code>log</code> call can write all the <code>TRACE</code> log messages to the console, while only pushing <code>ERROR</code>s to DataDog and eg <code>INFO</code> messages to CloudWatch</li>
<li>optionally colorize log message based on the log level</li>
<li>make logging fun</li>
</ul>
<p>Welcome to the Bazaar!</p>
</div>
<div id="the-structure-of-a-logger-and-a-log-record" class="section level2">
<h2 class="hasAnchor">
<a href="#the-structure-of-a-logger-and-a-log-record" class="anchor"></a>The structure of a logger and a log record</h2>
<p>Minimum requirements of a <code>logger</code> and its required parameters to log something:</p>
<ul>
<li>
<p>logger definition:</p>
<ul>
<li>log level <code>threshold</code>, eg <code>ERROR</code>, which defines the minimum log level required for actual logging</li>
<li>
<p><code>layout</code> function, which defines the format of a log record, having access to some extra variables describing the calling environment of the log record (like timestamp, hostname, username, calling function etc), eg</p>
<ul>
<li>
<p>a function returning structured text including log level, timestamp and message</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">layout &lt;-<span class="st"> </span><span class="cf">function</span>(level, msg) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sprintf">sprintf</a></span>(<span class="st">'%s [%s] %s'</span>, level, msg)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/layout">layout</a></span>(INFO, <span class="st">'Happy Thursday!'</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; INFO [1970-01-01 00:00:00] Happy Thursday!</span></a></code></pre></div>
</li>
<li>
<p>a function returning a JSON object of log level, timestamp, hostname, calling function and message</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">layout &lt;-<span class="st"> </span><span class="cf">function</span>(level, msg) <span class="kw">toJSON</span>(<span class="dt">level =</span> level, <span class="dt">timestamp =</span> time, <span class="dt">hostname =</span> node, <span class="dt">message =</span> msg)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/layout">layout</a></span>(INFO, <span class="st">'Happy Thursday!'</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; {'level': 'INFO', 'timestamp': '1970-01-01 00:00:00', 'hostname': 'foobar', 'message': 'Happy Thursday!'}</span></a></code></pre></div>
</li>
</ul>
</li>
<li>
<p><code>formatter</code> function, which converts the R objects passed to the logger into an actual character vector, eg</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">formatter &lt;-<span class="st"> </span><span class="cf">function</span>(...) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(..., <span class="dt">collapse =</span> <span class="st">' '</span>, <span class="dt">sep =</span> <span class="st">' '</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">formatter</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], <span class="st">'foo'</span>, pi)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; [1] "a foo 3.14159265358979 b foo 3.14159265358979 c foo 3.14159265358979"</span></a></code></pre></div>
</li>
<li>
<p><code>appender</code> function, which writes the actual log record somewhere, eg <code>stdout</code>, a file or a streaming service, eg</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">appender &lt;-<span class="st"> </span><span class="cf">function</span>(line) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cat">cat</a></span>(line, <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">appender</span>(<span class="st">'INFO [now] I am a log message'</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; INFO [now] I am a log message </span></a></code></pre></div>
</li>
</ul>
</li>
<li>
<p>user-provided parameters:</p>
<ul>
<li>actual log level, eg <code>INFO</code>, which describes the severity of a message</li>
<li>R objects to be logged</li>
</ul>
</li>
</ul>
<p>Putting all these together:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">TODO create logger</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">TODO use that logger</a></code></pre></div>
<p>TODO describe stacking loggers</p>
</div>
<div id="log-levels" class="section level2">
<h2 class="hasAnchor">
<a href="#log-levels" class="anchor"></a>Log levels</h2>
<p><code>logger</code> uses the default <code>log4j</code> log levels and supports suppressing log messages with lower level compared to the currently set threshold in the namespace:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="st">'Hi, there!'</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; INFO [2018-14-11 02:04:31] Hi, there!</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw"><a href="reference/log.html">log_debug</a></span>(<span class="st">'How are you doing today?'</span>)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw"><a href="reference/log_threshold.html">log_threshold</a></span>()</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; Log level: INFO</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="kw"><a href="reference/log_threshold.html">log_threshold</a></span>(TRACE)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="kw"><a href="reference/log.html">log_debug</a></span>(<span class="st">'How are you doing today?'</span>)</a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; DEBUG [2018-14-11 02:05:15] How are you doing today?</span></a></code></pre></div>
<p>If you want to define the log level in a programmatic way, check out the <code>log</code> function, and see <code><a href="reference/log_levels.html">?log_levels</a></code> for all the supported log levels.</p>
</div>
<div id="log-message-formats" class="section level2">
<h2 class="hasAnchor">
<a href="#log-message-formats" class="anchor"></a>Log message formats</h2>
<p>By default, the <code>log</code> function will simply record the log-level, current timestamp and the message after being processed by <code>glue</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="dv">42</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; INFO [2018-14-11 02:11:10] 42</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="st">'The answer is {42}'</span>)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; INFO [2018-14-11 02:11:11] The answer is 42</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="st">'The answers are {1:5}'</span>)</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; INFO [2018-14-11 02:17:09] The answers are 1</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; INFO [2018-14-11 02:17:09] The answers are 2</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; INFO [2018-14-11 02:17:09] The answers are 3</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; INFO [2018-14-11 02:17:09] The answers are 4</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; INFO [2018-14-11 02:17:09] The answers are 5</span></a></code></pre></div>
<p>In the above example, first <code>42</code> was converted to a string by a message formatter, then the message was passed to a layout function to generate the actual log record.</p>
<p>An example of another layout function writing the same log messages in JSON:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="reference/log_layout.html">log_layout</a></span>(layout_json)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="dv">42</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; {"level":4,"timestamp":"2018-11-14 02:11:47","message":"42"}</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; {"level":4,"timestamp":"2018-11-14 02:17:36","message":"1"}</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; {"level":4,"timestamp":"2018-11-14 02:17:36","message":"2"}</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; {"level":4,"timestamp":"2018-11-14 02:17:36","message":"3"}</span></a></code></pre></div>
<p>To customize the format how the log messages are being rendered, see <code>?layout_generator</code> that provides very easy access to a bunch environmental variables – quick examples on automatically logging the call from which the log message originated along with the (package) namespace, calling function’s name, hostname, user running the R process etc:</p>
<ul>
<li>
<p>define custom logger:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">logger &lt;-<span class="st"> </span><span class="kw">layout_generator</span>(<span class="dt">msg_format =</span> <span class="st">'{node}/{pid}/{namespace}/{fn} {time} {level}: {msg}'</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="reference/log_layout.html">log_layout</a></span>(logger)</a></code></pre></div>
</li>
<li>
<p>check what’s being logged when called from the global environment:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="st">'foo'</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; nevermind/21133/R_GlobalEnv/NA 2018-14-11 01:31:51 INFO: foo</span></a></code></pre></div>
</li>
<li>
<p>check what’s being logged when called from a custom function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>() <span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="st">'foo'</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">f</span>()</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; nevermind/21133/R_GlobalEnv/f 2018-14-11 01:32:46 INFO: foo</span></a></code></pre></div>
</li>
<li>
<p>check what’s being logged when called from a package:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/load_all">load_all</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">'tests/logger-tester-package'</span>, <span class="dt">package =</span> <span class="st">'logger'</span>))</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; Loading logger.tester</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw">logger.tester.function</span>(INFO, <span class="st">'hi from tester package'</span>)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; nevermind/21133/logger.tester/logger.tester.function 2018-14-11 01:32:56 INFO: hi from tester package</span></a></code></pre></div>
</li>
<li>
<p>suppress messages in a namespace:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="reference/log_threshold.html">log_threshold</a></span>(<span class="dt">namespace =</span> <span class="st">'logger.tester'</span>)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; Log level: INFO </span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="kw"><a href="reference/log_threshold.html">log_threshold</a></span>(WARN, <span class="dt">namespace =</span> <span class="st">'logger.tester'</span>)</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="kw">logger.tester.function</span>(INFO, <span class="st">'hi from tester package'</span>)</a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="kw">logger.tester.function</span>(WARN, <span class="st">'hi from tester package'</span>)</a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; nevermind/21133/logger.tester/logger.tester.function 2018-14-11 01:33:16 WARN: hi from tester package</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="st">'I am still working in the global namespace'</span>)</a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; nevermind/21133/R_GlobalEnv/NA 2018-14-11 01:33:21 INFO: I am still working in the global namespace</span></a></code></pre></div>
</li>
</ul>
<p>Note that the <code>layout_generator</code> functions also adds a special attribute to the resulting formatting function so that when printing the layout function to the console, the user can easily interpret what’s being used instead of just showing the actual functions’s body. So thus if you want to write your own layout generator functions, please keep <code><a href="https://www.rdocumentation.org/packages/base/topics/match.call">match.call()</a></code> recorded in the <code>generator</code> attribute, or stick with standard functions. See some examples in the <code>layouts.R</code> file.</p>
</div>
<div id="delivering-log-records-to-their-destination" class="section level2">
<h2 class="hasAnchor">
<a href="#delivering-log-records-to-their-destination" class="anchor"></a>Delivering log records to their destination</h2>
<p>By default, <code>logger</code> will write to the console or <code>stdout</code> via the <code>appender_console</code> function:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="reference/log_appender.html">log_appender</a></span>()</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt; function(lines) {</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt;     cat(lines, sep = '\n')</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; &lt;environment: namespace:logger&gt;</span></a></code></pre></div>
<p>To write to a logfile instead, use the <code>appender_file</code> generator function, that returns a function that can be used in any namespace:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">t &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempfile</a></span>()</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw"><a href="reference/log_appender.html">log_appender</a></span>(<span class="kw"><a href="reference/appender_file.html">appender_file</a></span>(t))</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw"><a href="reference/log.html">log_info</a></span>(<span class="st">'where is this message going?'</span>)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="kw"><a href="reference/log_appender.html">log_appender</a></span>()</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt; appender_file(file = t)()</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/readLines">readLines</a></span>(t)</a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; [1] "INFO [2018-14-11 02:24:38] where is this message going?"</span></a></code></pre></div>
<p>You may find <code>appender_tee</code> also useful, that write the log messages to both <code>stdout</code> and a file.</p>
<p>Note that the <code>appender_file</code> and <code>appender_tee</code> generator functions also adds a special attribute to the resulting function so that when printing the appender function to the console, the user can easily interpret what’s being used instead of just showing the actual functions’s body. So thus if you want to write your own appender functions, please keep <code><a href="https://www.rdocumentation.org/packages/base/topics/match.call">match.call()</a></code> recorded in the <code>generator</code> attribute – see examples in the <code>appenders.R</code> file.</p>
<p>TODO note that <code>tee</code> can be implemented by stacking loggers as well, like described above</p>
</div>
<div id="todo" class="section level2">
<h2 class="hasAnchor">
<a href="#todo" class="anchor"></a>TODO</h2>
<ul>
<li>[ ] doc improvements, cross-links, pkgdown, vignettes for intro and devs</li>
<li>[ ] unit tests</li>
<li>[ ] code coverage report</li>
<li><p>[ ] lint</p></li>
<li>[x] support multiple appenders VS let users define a custom function wrapping multiple appenders</li>
<li>[x] support multiple loggers, eg log ERROR+ to a Errbit/CloudWatch/DataDog/Splunk etc and TRACE+ to the console</li>
<li>[x] allow, although do not recommend custom namespace (R pkg namespaces are just great)</li>
<li><p>[x] refactor layout functions to use the same backend and render message either via <code>glue</code>, <code>sprintf</code> or eg <code>toJSON</code> (wontdo)</p></li>
<li>[x] more variables inside of logger, eg call and function name</li>
<li><p>[ ] more variables inside of logger, eg OS name/version, Jenkins or other environment variables</p></li>
<li>[ ] <code>crayon</code>
</li>
<li>[ ] smarter JSON logger</li>
<li><p>[ ] graylog, kinesis, datadog, cloudwatch, slack etc appenders</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/daroczig/logger">https://​github.com/​daroczig/​logger</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Gergely Daróczi <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3149-8537" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>
<a href="https://system1.com"><img src="http://system1.com/static/svg/logo.svg" height="24"></a> <br><small class="roles"> Funder </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Gergely Daróczi, <a href="https://system1.com"><img src="http://system1.com/static/svg/logo.svg" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.1.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
